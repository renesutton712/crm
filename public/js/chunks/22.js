(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{238:function(t,e,s){"use strict";s.r(e);var r=s(2),o=s(8),a={name:"AddOfferComponent",props:["offer_id"],components:{"v-select":s.n(o).a},data:function(){return{submit:!1,form_fields:{offer_name:"",network_id:"",offer_url:"",offer_token:"",offer_token_val:"",offer_id:"",offer_rand_id:""},networks_list:[]}},methods:{save:function(){var t=this;if(this.submit=!0,this.validateOfferName||this.validateNetwork||this.validateOfferToken||this.validateOfferTokenVal)return!1;this.$vs.loading(),this.form_fields.offer_id=null==this.offer_id?0:this.offer_id,r.a.post("offers/store",this.form_fields).then((function(t){if("status"in t.data&&!t.data.status)throw t.data;location.reload()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},getNetworks:function(){var t=this;r.a.get("networks/get").then((function(e){if("status"in e.data)throw e.data;t.networks_list=e.data})).catch((function(e){t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},getOffer:function(){var t=this;this.$vs.loading(),r.a.get("offers/get/"+this.offer_id).then((function(e){if(!e.data.status)throw e.data;t.form_fields.offer_name=e.data.offer_name,t.form_fields.network_id=e.data.network_id,t.form_fields.offer_token=e.data.offer_token,t.form_fields.offer_token_val=e.data.offer_token_value,t.form_fields.offer_url=e.data.offer_url,t.form_fields.offer_rand_id=e.data.offer_id,t.$vs.loading.close()})).catch((function(e){t.$vs.loading(),t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))}},computed:{validateOfferName:function(){return""===this.form_fields.offer_name},validateNetwork:function(){return""===this.form_fields.network_id},validateOfferToken:function(){return""===this.form_fields.offer_token},validateOfferTokenVal:function(){return""===this.form_fields.offer_token_val}},beforeMount:function(){this.getNetworks(),null!==this.offer_id&&this.getOffer()},destroyed:function(){this.$emit("destroyOfferId")}},f=s(1),i={name:"IndexComponent",components:{AddOfferComponent:Object(f.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vs-row",{attrs:{"vs-w":"12"}},[s("vs-col",[s("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Offer Name"},model:{value:t.form_fields.offer_name,callback:function(e){t.$set(t.form_fields,"offer_name",e)},expression:"form_fields.offer_name"}}),t._v(" "),t.submit&&t.validateOfferName?s("span",{staticClass:"error"},[t._v("Offer name is required!")]):t._e()],1)],1),t._v(" "),s("vs-row",{staticClass:"mt-3",attrs:{"vs-w":"12"}},[s("vs-col",[s("label",{attrs:{for:"Network"}},[t._v("Select Network(optional):")]),t._v(" "),s("v-select",{attrs:{label:"network_name",id:"Network",options:t.networks_list,reduce:function(t){return t.id}},model:{value:t.form_fields.network_id,callback:function(e){t.$set(t.form_fields,"network_id",e)},expression:"form_fields.network_id"}}),t._v(" "),t.submit&&t.validateNetwork?s("span",{staticClass:"error"},[t._v("Network is required!")]):t._e()],1)],1),t._v(" "),s("vs-row",{staticClass:"mt-3",attrs:{"vs-w":"12"}},[s("vs-col",{attrs:{"vs-w":"5"}},[s("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Offer URL param key"},model:{value:t.form_fields.offer_token,callback:function(e){t.$set(t.form_fields,"offer_token",e)},expression:"form_fields.offer_token"}}),t._v(" "),t.submit&&t.validateOfferToken?s("span",{staticClass:"error"},[t._v("Offer name is required!")]):t._e()],1),t._v(" "),s("vs-col",{attrs:{"vs-w":"2"}}),t._v(" "),s("vs-col",{attrs:{"vs-w":"5"}},[s("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Offer URL param value"},model:{value:t.form_fields.offer_token_val,callback:function(e){t.$set(t.form_fields,"offer_token_val",e)},expression:"form_fields.offer_token_val"}}),t._v(" "),t.submit&&t.validateOfferTokenVal?s("span",{staticClass:"error"},[t._v("Offer name is required!")]):t._e()],1)],1),t._v(" "),s("vs-row",{staticClass:"mt-3",attrs:{"vs-w":"12"}},[s("vs-col",[s("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Offer URL(Optional)"},model:{value:t.form_fields.offer_url,callback:function(e){t.$set(t.form_fields,"offer_url",e)},expression:"form_fields.offer_url"}})],1)],1),t._v(" "),s("vs-row",{staticClass:"mt-5",attrs:{"vs-w":"12"}},[s("vs-col",[s("vs-button",{attrs:{color:"success",type:"filled"},on:{click:t.save}},[t._v("Save")])],1)],1)],1)}),[],!1,null,"6adc606c",null).exports},data:function(){return{isModalVisible:!1,offers_list:[],selected_offers:[],offer_id:null}},methods:{showModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},getOffers:function(){var t=this;this.$vs.loading(),r.a.get("offers/get").then((function(e){if("string"==typeof e.data)throw e.data;t.offers_list=e.data,t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},editOffer:function(t){this.offer_id=t,this.showModal()},deleteOffer:function(t){var e=this;confirm("Are you sure you want to delete this offer?")&&r.a.get("offers/delete/"+t).then((function(t){if(!t.data.status)throw t.data;location.reload()})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Error",text:t.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},destroyOfferId:function(){this.offer_id=null}},beforeMount:function(){this.getOffers()}},n=Object(f.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vs-card",[s("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between","vs-align":"center","vs-w":"12"}},[s("vs-col",{attrs:{"vs-w":"6","vs-type":"flex","vs-justify":"flex-start","vs-align":"center"}},[s("div",[s("h3",[t._v("Offers")])])]),t._v(" "),s("vs-col",{attrs:{"vs-w":"6","vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[s("vs-button",{attrs:{type:"filled",color:"primary"},on:{click:t.showModal}},[t._v("Add Offer")])],1)],1),t._v(" "),s("vs-row",[s("vs-col",[s("vs-table",{attrs:{search:"",data:t.offers_list,multiple:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,o){return s("vs-tr",{key:o,attrs:{data:e}},[s("vs-td",{attrs:{data:r[o].id}},[t._v(t._s(r[o].id))]),t._v(" "),s("vs-td",{attrs:{data:r[o].network_name}},[t._v(t._s(r[o].network_name))]),t._v(" "),s("vs-td",{attrs:{data:r[o].offer_id}},[t._v(t._s(r[o].offer_id))]),t._v(" "),s("vs-td",{attrs:{data:r[o].offer_name}},[t._v(t._s(r[o].offer_name))]),t._v(" "),s("vs-td",{attrs:{data:r[o].offer_token}},[t._v(t._s(r[o].offer_token))]),t._v(" "),s("vs-td",{attrs:{data:r[o].offer_token_value}},[t._v(t._s(r[o].offer_token_value))]),t._v(" "),s("vs-td",{attrs:{data:r[o].offer_url}},[t._v(t._s(r[o].offer_url))]),t._v(" "),1===r[o].status?s("vs-td",{attrs:{data:r[o].status}},[t._v("Active")]):s("vs-td",{attrs:{data:r[o].status}},[t._v("Not Active")]),t._v(" "),s("vs-td",{attrs:{data:r[o].updated_at}},[t._v(t._s(r[o].updated_at))]),t._v(" "),s("vs-td",[s("vs-icon",{staticClass:"mr-3",attrs:{icon:"create",size:"small",color:"success"},on:{click:function(e){return t.editOffer(r[o].id)}}}),t._v(" "),s("vs-icon",{attrs:{icon:"delete",size:"small",color:"danger"},on:{click:function(e){return t.deleteOffer(r[o].id)}}})],1)],1)}))}}]),model:{value:t.selected_offers,callback:function(e){t.selected_offers=e},expression:"selected_offers"}},[s("template",{slot:"header"}),t._v(" "),s("template",{slot:"thead"},[s("vs-th",{attrs:{sort_key:"id"}},[t._v("ID")]),t._v(" "),s("vs-th",{attrs:{sort_key:"network_name"}},[t._v("Network Name")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"offer_id"}},[t._v("OI")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"offer_name"}},[t._v("Offer Name")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"offer_token"}},[t._v("Param key")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"offer_token_value"}},[t._v("Param value")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"offer_url"}},[t._v("Offer URL")]),t._v(" "),s("vs-th",{attrs:{sort_key:"status"}},[t._v("Status")]),t._v(" "),s("vs-th",{attrs:{sort_key:"updated_at"}},[t._v("Created")]),t._v(" "),s("vs-th",{attrs:{sort_key:"actions"}},[t._v("Actions")])],1)],2)],1)],1),t._v(" "),t.isModalVisible?s("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[s("p",[t._v("Add Offer")])]},proxy:!0},{key:"body",fn:function(){return[s("add-offer-component",{attrs:{offer_id:t.offer_id},on:{destroyOfferId:t.destroyOfferId}})]},proxy:!0}],null,!1,1405740252)}):t._e()],1)}),[],!1,null,"8a45d786",null);e.default=n.exports}}]);