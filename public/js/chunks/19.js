(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{241:function(t,e,i){"use strict";i.r(e);var s=i(2),n={name:"AddNewIframePixel",props:["p_id"],data:function(){return{submit:!1,form_fields:{pixel_id:0,pixel_name:"",pixel_content:""}}},methods:{save:function(){var t=this;this.$vs.loading(),this.form_fields.pixel_id=null==this.p_id?0:this.p_id,s.a.post("iframe/store",this.form_fields).then((function(t){if(!t.data.status)throw t.data;location.reload()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},getIframeContent:function(){var t=this;this.$vs.loading(),s.a.get("iframe/get/"+this.p_id).then((function(e){t.form_fields.pixel_id=e.data.id,t.form_fields.pixel_name=e.data.iframe_name,t.form_fields.pixel_content=e.data.iframe_content,t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))}},computed:{validatePixelName:function(){return""===this.form_fields.network_name}},beforeMount:function(){null!==this.p_id&&this.getIframeContent()},destroyed:function(){this.$emit("destroyPID")}},o=i(1),a={name:"IndexComponent",components:{AddNewIframePixel:Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("vs-row",{attrs:{"vs-w":"12"}},[i("vs-col",[i("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Pixel Name"},model:{value:t.form_fields.pixel_name,callback:function(e){t.$set(t.form_fields,"pixel_name",e)},expression:"form_fields.pixel_name"}}),t._v(" "),t.submit&&t.validatePixelName?i("span",{staticClass:"error"},[t._v("Pixel name is required!")]):t._e()],1)],1),t._v(" "),i("vs-row",{staticClass:"mt-4",attrs:{"vs-w":"12"}},[i("vs-col",[i("vs-textarea",{attrs:{label:"Pixel Content",height:"400px"},model:{value:t.form_fields.pixel_content,callback:function(e){t.$set(t.form_fields,"pixel_content",e)},expression:"form_fields.pixel_content"}})],1)],1),t._v(" "),i("vs-row",{staticClass:"mt-5",attrs:{"vs-w":"12"}},[i("vs-col",[i("vs-button",{attrs:{color:"success",type:"filled"},on:{click:t.save}},[t._v("Save")])],1)],1)],1)}),[],!1,null,"6e72ed58",null).exports},data:function(){return{isModalVisible:!1,p_id:null,iframe_list:[],selected_iframes:[]}},methods:{showModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},getPixels:function(){var t=this;this.$vs.loading(),s.a.get("iframe/get").then((function(e){t.iframe_list=e.data,t.$vs.loading.close()})).catch((function(e){console.log(e),t.$vs.loading.close(),t.$vs.notify({title:"Error",text:e.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},destroyPID:function(){this.p_id=null},deleteIframePixel:function(t){var e=this;confirm("Are you sure you want to delete this network?")&&(this.$vs.loading(),s.a.get("iframe/delete/"+t).then((function(t){if(!t.data.status)throw e.$vs.loading.close(),t.data;location.reload()})).catch((function(t){e.$vs.loading.close(),e.$vs.loading.close(),e.$vs.notify({title:"Error",text:t.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})})),this.$vs.loading())},EditIframePixel:function(t){this.p_id=t,this.showModal()},cutString:function(t){return t.substring(0,150)+"..."}},beforeMount:function(){this.getPixels()}},l=Object(o.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vs-card",[i("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between","vs-align":"center","vs-w":"12"}},[i("vs-col",{attrs:{"vs-w":"6","vs-type":"flex","vs-justify":"flex-start","vs-align":"center"}},[i("div",[i("h3",[t._v("Iframe Pixels")])])]),t._v(" "),i("vs-col",{attrs:{"vs-w":"6","vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[i("vs-button",{attrs:{type:"filled",color:"primary"},on:{click:t.showModal}},[t._v("Add Iframe Pixel")])],1)],1),t._v(" "),i("vs-row",[i("vs-col",[i("vs-table",{attrs:{search:"",data:t.iframe_list,multiple:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,n){return i("vs-tr",{key:n,attrs:{data:e}},[i("vs-td",{attrs:{data:s[n].id}},[t._v(t._s(s[n].id))]),t._v(" "),i("vs-td",{attrs:{data:s[n].iframe_name}},[t._v(t._s(s[n].iframe_name))]),t._v(" "),i("vs-td",{attrs:{data:s[n].iframe_content}},[i("vx-tooltip",{attrs:{title:"Full",color:"primary",text:s[n].iframe_content,position:"bottom"}},[t._v("\n                                "+t._s(t.cutString(s[n].iframe_content))+"\n\n                            ")])],1),t._v(" "),i("vs-td",[i("vs-icon",{staticClass:"mr-3",attrs:{icon:"create",size:"small",color:"success"},on:{click:function(e){return t.EditIframePixel(s[n].id)}}}),t._v(" "),i("vs-icon",{attrs:{icon:"delete",size:"small",color:"danger"},on:{click:function(e){return t.deleteIframePixel(s[n].id)}}})],1)],1)}))}}]),model:{value:t.selected_iframes,callback:function(e){t.selected_iframes=e},expression:"selected_iframes"}},[i("template",{slot:"header"}),t._v(" "),i("template",{slot:"thead"},[i("vs-th",{attrs:{"sort-key":"id"}},[t._v("ID")]),t._v(" "),i("vs-th",{attrs:{"sort-key":"iframe_name"}},[t._v("Iframe Name")]),t._v(" "),i("vs-th",{attrs:{"sort-key":"iframe_content"}},[t._v("Iframe Content")]),t._v(" "),i("vs-th",[t._v("Actions")])],1)],2)],1)],1),t._v(" "),t.isModalVisible?i("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[i("p",[t._v("Add Iframe Pixel")])]},proxy:!0},{key:"body",fn:function(){return[i("add-new-iframe-pixel",{attrs:{p_id:t.p_id},on:{destroyPID:t.destroyPID}})]},proxy:!0}],null,!1,1966788386)}):t._e()],1)}),[],!1,null,"6fd4ed5f",null);e.default=l.exports}}]);