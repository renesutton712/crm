(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{237:function(t,o,e){"use strict";e.r(o);var s=e(2),r=e(10),a={name:"AddNewRotator",props:["ri"],components:{"v-select":e.n(r).a},data:function(){return{submit:!1,networks_list:[],form_fields:{rotator_name:"",networks:[{network_id:"",weight:"",priority:""}],status:1,rotator_id:0}}},methods:{getNetworks:function(){var t=this;s.a.get("networks/get").then((function(o){if("status"in o.data)throw o.data;t.networks_list=o.data})).catch((function(o){t.$vs.notify({title:"Error",text:o.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},destroyRI:function(){this.$emit("destroyri")},addNetwork:function(){this.form_fields.networks.push({network_id:"",weight:"",priority:""})},removeNetwork:function(t){this.form_fields.networks.splice(t,1)},save:function(){var t=this;this.$vs.loading(),this.form_fields.rotator_id=null==this.ri?0:this.ri,this.submit=!0,this.validateRotatorName?this.$vs.loading.close():s.a.post("rotators/store",this.form_fields).then((function(t){if(!t.data.status)throw t.data.msg;location.reload()})).catch((function(o){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:o,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},getRotatorData:function(){var t=this;this.$vs.loading(),s.a.get("rotators/get/"+this.ri).then((function(o){t.form_fields.rotator_name=o.data[0].rotator_name,t.form_fields.networks=o.data[0].rotator_group,t.$vs.loading.close()})).catch((function(o){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:o.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))}},computed:{validateRotatorName:function(){return""===this.form_fields.rotator_name}},beforeMount:function(){this.getNetworks(),null!==this.ri&&this.getRotatorData()},destroyed:function(){this.destroyRI()}},i=e(1),n={name:"IndexComponent",components:{AddNewRotator:Object(i.a)(a,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("vs-row",{attrs:{"vs-w":"12"}},[e("vs-col",[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Rotator Name"},model:{value:t.form_fields.rotator_name,callback:function(o){t.$set(t.form_fields,"rotator_name",o)},expression:"form_fields.rotator_name"}}),t._v(" "),t.submit&&t.validateRotatorName?e("span",{staticClass:"error"},[t._v("Rotator name is required!")]):t._e()],1)],1),t._v(" "),e("vs-divider"),t._v(" "),t._l(t.form_fields.networks,(function(o,s){return e("vs-row",{attrs:{"vs-w":"12"}},[e("vs-col",{attrs:{"vs-w":"4"}},[e("label",{attrs:{for:"Network"}},[t._v("Network:")]),t._v(" "),e("v-select",{attrs:{label:"network_name",id:"Network",options:t.networks_list,reduce:function(t){return t.id}},model:{value:o.network_id,callback:function(e){t.$set(o,"network_id",e)},expression:"item.network_id"}})],1),t._v(" "),e("vs-col",{staticClass:"ml-3 mr-3",attrs:{"vs-w":"2"}},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Weight"},model:{value:o.weight,callback:function(e){t.$set(o,"weight",e)},expression:"item.weight"}})],1),t._v(" "),e("vs-col",{attrs:{"vs-w":"2"}},[e("vs-input",{staticClass:"w-full",attrs:{"label-placeholder":"Priority"},model:{value:o.priority,callback:function(e){t.$set(o,"priority",e)},expression:"item.priority"}})],1),t._v(" "),e("vs-col",{staticClass:"ml-3",attrs:{"vs-w":"2"}},[e("vs-button",{staticClass:"mt-5",attrs:{"icon-pack":"feather",icon:"icon-minus-square",type:"border",color:"dark",disabled:t.form_fields.networks.length<=1},on:{click:function(o){return t.removeNetwork(s)}}})],1)],1)})),t._v(" "),e("vs-row",{staticClass:"mt-4"},[e("vs-col",[e("vs-button",{attrs:{color:"dark",type:"border"},on:{click:t.addNetwork}},[t._v("Add network")])],1)],1),t._v(" "),e("vs-divider"),t._v(" "),e("vs-row",{staticClass:"mt-5",attrs:{"vs-w":"12","vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[e("vs-col",{attrs:{"vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[e("vs-button",{attrs:{color:"success",type:"filled"},on:{click:t.save}},[t._v("Save")])],1)],1)],2)}),[],!1,null,"4bca765b",null).exports},data:function(){return{isModalVisible:!1,rotators_list:[],selected_rotators:[],rotator_id:null}},methods:{convertDate:function(t){var o=new Date(t);return o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()},showModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},getRotators:function(){var t=this;this.$vs.loading(),s.a.get("rotators/get").then((function(o){if(t.rotators_list=o.data,0===t.rotators_list.length)throw"No rotators found";t.$vs.loading.close()})).catch((function(o){t.$vs.loading.close(),t.$vs.notify({title:"Error",text:o,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})}))},editRotator:function(t){this.rotator_id=t,this.showModal()},destroyri:function(){this.rotator_id=null},deleteRotator:function(t){var o=this;confirm("are you sure you want to delete this rotator?")&&(this.$vs.loading(),s.a.get("rotators/delete/"+t).then((function(t){if(!t.data.status)throw t.data;location.reload()})).catch((function(t){o.$vs.loading.close(),o.$vs.notify({title:"Error",text:t.msg,iconPack:"feather",icon:"icon-alert-circle",color:"warning"})})))}},beforeMount:function(){this.getRotators()}},l=Object(i.a)(n,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("vs-card",[e("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between","vs-align":"center","vs-w":"12"}},[e("vs-col",{attrs:{"vs-w":"6","vs-type":"flex","vs-justify":"flex-start","vs-align":"center"}},[e("div",[e("h3",[t._v("Rotator")])])]),t._v(" "),e("vs-col",{attrs:{"vs-w":"6","vs-type":"flex","vs-justify":"flex-end","vs-align":"center"}},[e("vs-button",{attrs:{type:"filled",color:"primary"},on:{click:t.showModal}},[t._v("Add Rotator")])],1)],1),t._v(" "),e("vs-row",[e("vs-col",[e("vs-table",{attrs:{search:"",data:t.rotators_list,multiple:""},scopedSlots:t._u([{key:"default",fn:function(o){var s=o.data;return t._l(s,(function(o,r){return e("vs-tr",{key:r,attrs:{data:o}},[e("vs-td",{attrs:{data:s[r].id}},[t._v(t._s(s[r].id))]),t._v(" "),e("vs-td",{attrs:{data:s[r].rotator_name}},[t._v(t._s(s[r].rotator_name))]),t._v(" "),e("vs-td",{attrs:{data:s[r].status}},[t._v(t._s(s[r].status))]),t._v(" "),e("vs-td",{attrs:{data:s[r].updated_at}},[t._v(t._s(t.convertDate(s[r].updated_at)))]),t._v(" "),e("vs-td",[e("vs-icon",{staticClass:"mr-3",attrs:{icon:"create",size:"small",color:"success"},on:{click:function(o){return t.editRotator(s[r].id)}}}),t._v(" "),e("vs-icon",{attrs:{icon:"delete",size:"small",color:"danger"},on:{click:function(o){return t.deleteRotator(s[r].id)}}})],1)],1)}))}}]),model:{value:t.selected_rotators,callback:function(o){t.selected_rotators=o},expression:"selected_rotators"}},[e("template",{slot:"header"}),t._v(" "),e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"id"}},[t._v("ID")]),t._v(" "),e("vs-th",{attrs:{"sort-key":"campaign_name"}},[t._v("Rotator Name")]),t._v(" "),e("vs-th",{attrs:{"sort-key":"network_name"}},[t._v("Status")]),t._v(" "),e("vs-th",{attrs:{sort_key:"offer_name"}},[t._v("Created")]),t._v(" "),e("vs-th",[t._v("Actions")])],1)],2)],1)],1),t._v(" "),t.isModalVisible?e("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[e("p",[t._v("Add Rotator")])]},proxy:!0},{key:"body",fn:function(){return[e("add-new-rotator",{attrs:{ri:t.rotator_id},on:{destroyri:t.destroyri}})]},proxy:!0}],null,!1,2319456359)}):t._e()],1)}),[],!1,null,"442836dc",null);o.default=l.exports}}]);